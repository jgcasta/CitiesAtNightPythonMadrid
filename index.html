<!doctype html>
<html lang="es">

	<head>
		<meta charset="utf-8">
		<title>CitiesAtNight - PythonMadrid 2016</title>

		<meta name="description" content="Presentacion para las IX Jornadas de SIG Libre">
		<meta name="author" content="Jose Gomez Castaño">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		
		<link rel="stylesheet" href="css/theme/sigte2015.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3>Cities At Night: Georreferenciación de imágenes nocturnas tomadas desde la ISS, para estudios de consumo energético y contaminación lumínica</h3>
					<small>José Gómez Castaño, Alejandro Sánchez de Miguel</small>
					<small>Departamento de Astrofísica y CC. De la Atmósfera – Universidad Complutense de Madrid <a href="http://guaix.fis.ucm.es/" target="_blank">GUAIX</a> </small>
					<br><small>29 de Junio de 2016</small><br>
					<!--<img src='img/logoucm.png'>&nbsp;&nbsp;&nbsp;<img src='img/logocrowdcrafting.png'> -->
					<img src='http://www.python-madrid.es/static/web/imgs/logo.png' ></p>

					<aside class="notes">
						Presentación GUAIX y Crowdcrafting
					</aside>

				</section>

				<section data-background="img/todos.jpg">
					<h2>¿Quiénes somos?</h2>
					<a href='https://guaix.fis.ucm.es/' target='_blank'><img style='border:0px' src='img/guaix.png' ></a>
					<a href='http://www.stars4all.eu/' target='_blank' ><img style='border:0px' src='img/stars4all-1.png' ></a>
					<aside class="notes">
						Nosotros
					</aside>

				</section>

				<section >
					<h3>La Ciencia es demasiado importante como para dejarla en manos de los Científicos</h3>
					<img src='img/crowdcrafting.png' width="200" heigth="200">&nbsp;&nbsp;&nbsp;<img src='img/logosolfabric.png'  width="210" heigth="210">
					<aside class="notes">
						Necesitamos una plataforma robusta que soporte la conexión de cientos de usuarios Crowdcrafting y equipo de Solfabric
					</aside>
				</section>

				<section>
					<h2>Indice</h2>
					<div>
						<ul>
						<li>Objetivos</li>
						<li>Contaminación Lumínica</li>
						<li>Procesamiento de Imágenes</li>
						<li>Aplicaciones desarrolladas</li>
						<ul>
						<li>	Web CitiesAtNight</li>
						<li>	DarkSkies</li>
						<li>	LostAtNight</li>
						<li>	NightCitiesISS</li>
						</ul>
						<li>Fuentes de datos</li>
						<li>Postproceso de datos  geográficos</li>
						<li>Resultados de participación</li>
						<li>Nuevas iniciativas</li>
						<li>Imágenes resultantes</li>
					</ul>
					</div>
					<aside class="notes">
						Indice rápido
					</aside>

				</section>	


				<section data-background="img/ventana.png">
					<h2>Objetivos</h2>
					<blockquote >Convertir las imágenes en una fuente de datos cuantitativos para estudios de Contaminación Lumínica y consumo energético</blockquote>
					
					<p class="fragment">Recabar colaboración para el trabajo científico</p>
					<p class="fragment">Identificar y clasificar imágenes</p>
					<p class="fragment">Localizarlas y georreferenciarlas</p>

					<aside class="notes">
						El objetivo del trabajo, 3 puntos
					</aside>
				</section>



				<section data-background="img/contaminacion.png">
					<h1 style="color:black">¿Contaminación?</h1>
				</section>

				<section data-background="img/contaminacionLuninica.png">
					<h1 style="color:white">¿Contaminación?</h1>
				</section>

				<section data-background="img/fondoviirs.png">
					<blockquote style="color:yellow; top: 200px;">En términos científicos, por contaminación lumínica se entiende la alteración de la oscuridad natural del medio nocturno producida por la emisión de luz artificial. </blockquote>
					<aside class="notes">
						<ul>
						<li>Definición</li>
						</ul>
					</aside>
				</section>

				<section  data-background="img/contaminacionLuninica.png">
					<img src='img/consumo.png'>
					<pre>Sánchez de Miguel, A., Zamorano, J., Gómez Castaño, J., & Pascual, S. (2014). Evolution of the energy consumed by street lighting in Spain estimated with DMSP-OLS data. Journal of Quantitative Spectroscopy and Radiative Transfer, 139, 109-117.</pre>

					<aside class="notes">
						Evolución del consumo energético usando datos de satélite DMSP desde 1992 calibrados en 1998 y 2012, y VIIRS calibrados en 2014
					</aside>
				</section>

			


				<section style="top: 0; left: 400px" data-background="img/fondoviirs.jpg" >

						<div >
							<h3 style=" color: black;">¿Desde dónde?</h3>
						</div>

					<aside class="notes">
						<ul>
						<li>Satélites disponibles</li>
						<li>DMSP - VIIRS - ISS</li>
						<li>La posición de la ISS a partir de los elementos orbitales TLE</li>
						</ul>
					</aside>

				</section>

				<section >
					<h3>Desde Tierra ubicación de SQM automáticos</h3>
					<iframe width="1000px"  height="600px" src="https://jzamorano.cartodb.com/viz/2697d222-263b-11e5-beb6-0e4fddd5de28/embed_map" ></iframe>
					<aside class="notes">
						World Atlas of Artificial Sky Brightness
					</aside>
				</section>
				
				<section >
					<h3>¿Desde dónde? - DMSP</h3>
					<a href="http://maps.ngdc.noaa.gov/viewers/dmsp_mosaic/" target="_blank"><img src='img/dmsp.png'></a>
					<aside class="notes">
						<ul>
						<li>Satélites disponibles</li>
						<li>DMSP - VIIRS - ISS</li>
						<li>La posición de la ISS a partir de los elementos orbitales TLE</li>
						</ul>
					</aside>					
				</section>

				<section  style="top: 0; left: 400px" data-background="img/niloviirs.jpg">
					<div>
					<h2>VIIRS</h2>
					<p>DNB</p>
					
					</div>


					<aside class="notes">
						<ul>
						
						<li>Visible Infrared Imager Radiometer Suite</li>
						<li>824 kilometers </li>
						<li>21 nov 2011 </li>
						<li>La posición de la ISS a partir de los elementos orbitales TLE</li>
						</ul>
					</aside>					
				</section>

				<section  >
					<div>
					<h2>VIIRS</h2>
					<img style='border:0px' width="75%" height="75%" src='img/sun-synchronous.png'>
					<img style='border:0px' width="60%" height="60%" src='img/global_vir_2011328.jpg'>
					
					</div>

					<aside class="notes">
						<ul>
						
						<li>Visible Infrared Imager Radiometer Suite</li>

						</ul>
					</aside>					
				</section>


				<section  style="left: -200px; width: 150%;height:125% ">

					<img style='border:0px' width="75%" height="75%" src='img/viirsradiancia.png'>

					<aside class="notes">
						<ul>
						
						<li>Visible Infrared Imager Radiometer Suite</li>
						<li>824 kilometers </li>
						<li>21 nov 2011 </li>
						<li>La posición de la ISS a partir de los elementos orbitales TLE</li>
						</ul>
					</aside>					
				</section>

				<section>
					<h2>ISS</h2>
					<p><img src='img/isstrayectory.png'></p>

					<aside class="notes">
						<ul>
						<li>Altitud entre los 350 y 400km</li>
						<li>Más de 15 revoluciones por día</li>
						<li>La posición de la ISS a partir de los elementos orbitales TLE</li>
						</ul>
					</aside>

				</section>
<!--
				<section style="left: -200px; width: 1200px;height:1300px ">
					<h4 style="left: 0px; ">ISS - Descarga de elementos TLE ISS (ZARYA) <a href="https://www.space-track.org" target="_blank">space-track</a></h4>


					<pre style="width:1000px; height:1300px;">
						<code class="python" style="max-height: 1300px;  font-family: courier;font-size: -1">
	#!/usr/bin/env python
	# -*- coding: utf-8

	import urllib, urllib2, cookielib
	import datetime

	noradId = '25544'       # NORADID de la ISS
	fecha = '2016/06/15'    # Fecha de osculación

	baseURL = 'https://www.space-track.org'
	username = 'usuario'
	password = 'pass'

	d = datetime.datetime.strptime(fecha, "%Y/%m/%d")
	d1 = d + datetime.timedelta(days=1)
	dstr = d.strftime("%Y-%m-%d")
	d1str = d1.strftime("%Y-%m-%d")

	print "Connecting..."
	cj = cookielib.CookieJar()
	opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
	parameters = urllib.urlencode({'identity': username ,'password': password})
	opener.open(baseURL + '/ajaxauth/login', parameters)
	queryString = baseURL +"/basicspacedata/query/class/tle/format/tle/NORAD_CAT_ID/"
	queryString = queryString + noradId+"/EPOCH/"+dstr+"%2000:00:00--"+d1str+"%2000:00:00"
	resp = opener.open(queryString)

	TLE = resp.read()
	print "---------------------------------TLE---------------------------------\n"
	print TLE

	opener.close()
						</code>
					</pre>



				</section>

-->

				<section style="left: -200px; width: 1400px;height:1300px ">
					<h4 style="left: 0px; ">Descarga de elementos TLE y posisición de ISS (ZARYA) <a href="https://www.space-track.org" target="_blank">space-track</a></h4>

					<iframe width="1200px"  height="650px" src="http://nbviewer.jupyter.org/github/jgcasta/CitiesAtNightPythonMadrid/blob/master/jupyter/LocalizacionISS.ipynb" ></iframe>

				</section>

				<section data-background="img/fondoPersonas.png">
					<h1 style="color:yellow">Objetivos de participación</h1>
					<h3 class="fragment" style="color:yellow">Colaboración</h3>
					<h3 class="fragment" style="color:yellow">Potenciar conocimiento abierto</h3>
					<h3 class="fragment" style="color:yellow">Potenciar código fuente abierto</h3>
					<h3 class="fragment" style="color:yellow">Uso de datos abiertos</h3>

					<aside class="notes">
						<ul>
						<li>Colaboración</li>
						<li>Potenciar conocimiento abierto</li>
						<li>Potenciar código fuente abierto</li>
						<li>Uso de datos abiertos</li>
						</ul>
					</aside>
				</section>


				<section >
					<h2>Acceso a datos</h2>
					<img src='img/gateway.png'>
					
					<aside class="notes">
						Descarga de las imágenes y los metadados desde el sitio FTP del JSC mediante un proceso automático diario
					</aside>

				</section>


				<section >
					<h2>Metadatos de imágenes</h2>
					<pre>NASA PHOTO ID:                  iss039e009160.NEF
GMT:                            2014:04:02 21:06:27
MODEL:                          NIKON D3S S/N: 2007931
NASA SN and Temp:               NASA#2007931
Firmware:                       Ver.1.00
Image Size:                     4288x2844
Compression:                    Nikon NEF Compressed
Exposure Program:               Manual
Shutter:                        1/8
Aperture:                       2.8
Meter Mode:                     Multi-segment
Shooting Mode:                  Single-Frame
ISO Speed:                      25600
AF Area Mode:                   Single Area
Focal Length:                   31.0 mm
Lens ID:                        AF-S Zoom-Nikkor 28-70mm f/2.8D IF-ED
DOF:                            14.11 m (4.38 - 18.49)
Focus Mode:                     Manual
Focus Distance:                 7.08 m
Subject Distance Range:         Unknown
Compensation:                   0
Noise Reduction:                Off
Whitebalance:                   Auto
Flash:                          No Flash
Flash Mode:                     Did Not Fire
Flash Commander Mode:           Off
Flash Compensation:     0
Flash Control Mode:             Off
Flash Group A Control Mode:     Off
Flash Group B Control Mode:     Off
Self Timer Time:                5 s</pre>


					<aside class="notes">
						<ul>
						<li>Metadatos de cada imagen descargado mediante scrapping del sitio web del JSC</li>
						<li>No todos los datos se encuentran siempre</li>
						</ul>
					</aside>

				</section>


				<section >
					<h2>Procesamiento de imágenes</h2>
					<img src='img/histogramas.png'>

					<aside class="notes">
						Procesamiento inicial automático usando la descomposición del histograma, para obtener una primera clasificación.

						Concurso de Machine Learning
					</aside>
				</section>

				<section >
					<h3>Sitio web CitiesAtNight</h3>
					<a href="http://www.citiesatnight.org" target="_blank"><img src='img/citiesatnight.png'></a>
					
				</section>

				<section >
					<h3>CitiesAtNight acceso directo a imágenes</h3>
					<img src='img/tresmapas.png'>
					
				</section>

				<section >
					<h3>Aplicación DarkSkies</h3>
					<p ><a href="http://crowdcrafting.org/app/darkskies" target="_blank"><img src='img/dark.png'></a>

				</section>
				<section >
					<h3>Aplicación LostAtNight</h3>
					<p ><a href="http://crowdcrafting.org/app/LostAtNight/" target="_blank"><img src='img/lost.png'></a>

				</section>
				<section >
					<h3>Aplicación NightCitiesISS</h3>
					<p ><a href="http://crowdcrafting.org/app/nightcitiesiss/" target="_blank"><img src='img/nightcitiesiss.png'></a>

				</section>

				<section >
					<h3>Acceso a aplicaciones y Código fuente</h3>
					<h3>DarkSkies</h3>
					<p><a href="http://crowdcrafting.org/app/darkskies" target="_blank">http://crowdcrafting.org/app/darkskies</a>
						<a href="https://github.com/pmisson/darkskiesISS" target="_blank">https://github.com/pmisson/darkskiesISS</a></p>
					<h3>LostAtNight</h3>
					<p><a href="http://crowdcrafting.org/app/LostAtNight/" target="_blank">http://crowdcrafting.org/app/LostAtNight/</a>
						<a href="https://github.com/jgcasta/lostatnight" target="_blank">https://github.com/jgcasta/lostatnight</a></p>
					<h3>NitghtCitiesISS</h3>
					<p><a href="http://crowdcrafting.org/app/nightcitiesiss/" target="_blank">http://crowdcrafting.org/app/nightcitiesiss/</a>
						<a href="https://github.com/jgcasta/nightcitiesiss" target="_blank">https://github.com/jgcasta/nightcitiesiss</a></p>
					
				</section>

				<section >
					<h3>Imágenes clasificadas</h3>
					<iframe width="1200px"  height="600px" src="https://pmisson.cartodb.com/viz/fe1a723a-fa81-11e4-bb11-0e018d66dc29/embed_map" ></iframe>
					<aside class="notes">
						World Atlas of Artificial Sky Brightness
					</aside>
				</section>


				<section >
					<h3>Fuentes de datos</h3>
					<img src='img/fuentes.png'>
					
					<aside class="notes">
						<ul>
						<li>Fuentes abiertas</li>
						<li></li>
						</ul>
					</aside>
				</section>


				<section >
					<h3>HTML5
						Python
						QGIS gvSIG
						PostGIS
						</h3>
					<img src='img/pybossa.png' width="200%">
					<aside class="notes">
						Herramientas utilizadas y framework PyBossa
					</aside>
				</section>

				<section data-background="img/openscience.jpg" class="height: 50%">
					<h2 style="color:yellow">
						Open Source
						Open Science</h2>
					<img src='img/openscience.jpg'>
					<h2 style="color:red">Permitir la difusión y verificación de resultados</h2>
				</section>


				<section >
					<h3>Difusión</h3>
					<img src='img/redessociales.png'>

					<aside class="notes">
						La difusión ha sido importante a través de redes sociales, TV, prensa, medios electrónicos, apoyo de NASA, ESA,...
					</aside>
				</section>
				
				<section >
					<h3>Participación</h3>
					<img src='img/participacion.png'>
				</section>				

				<section>
					<h2>Participación por aplicaciones</h2>
					<table>
						<thead>
							<tr>
								<th>Aplicación</th>
								<th>Tareas</th>
								<th>Voluntarios</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>AppDarkSkies</td>
								<td>112563</td>
								<td>17070</td>
							<tr>
							<tr>
								<td>LostAtNight</td>
								<td>6881</td>
								<td>7639</td>
							<tr>
							<tr>
								<td>NightCitiesISS</td>
								<td>2112</td>
								<td>4835</td>
							<tr>
						</tbody>
					</table>

					<aside class="notes">
						Tareas realizadas por los voluntarios
					</aside>
				</section>


				<section >
					<h2>Resultados Descarga JSON</h2>
										<pre style="width:1100px"><code data-trim contenteditable>
{
  "info": {
    "linkData": "http://eol.jsc.nasa.gov/scripts/sseop/photo.pl?mission=ISS037&roll=E&frame=17703",
    "link_big": "http://eol.jsc.nasa.gov/sseop/images/ESC/large/ISS037/ISS037-E-17703.JPG",
    "link_small": "http://eol.jsc.nasa.gov/sseop/images/ESC/small/ISS037/ISS037-E-17703.JPG",
    "citylat": "38.1156879",
    "focal": "400.0",
    "coordimage": "http://eol.jsc.nasa.gov/scripts/SSEOP/MapCoordinate/MapCoordinate.pl?lat=38.8&lon=10.1",
    "idiss": "17703",
    "citylon": "13.3612671"
  },
  "n_answers": 20,
  "quorum": 0,
  "calibration": 0,
  "created": "2014-07-16T21:59:04.755231",
  "app_id": 1712,
  "state": "completed",
  "id": 606386,
  "priority_0": 0.921420060044208

					</code></pre>
					<aside class="notes">
						Para la descarga de los resultados y que sean verificables se ha usado el formato JSON con todos los datos
					</aside>
				</section>


				<section >
					<h2>Resultados Georreferenciados</h2>
										<pre style="width:1100px"><code data-trim contenteditable>
				mapX,mapY,pixelX,pixelY,enable
		-6.29923900000000003,36.53782000000000352,1451,2331,1
		-6.27469199999999994,36.53312999999999988,1408,2206,1
		-6.30627699999999969,36.52857900000000058,1513,2324,1
		-6.26748200000000022,36.48946300000000065,1609,2033,1
		-6.16431299999999993,36.5218190000000007,1173,1700,1
		-6.22362199999999977,36.56829499999999911,1093,2098,1
		-6.11581900000000012,36.66419299999999737,297,1941,1
		-6.35837699999999995,36.6163969999999992,1201,2837,1
		-6.42721300000000006,36.74621700000000146,706,3584,1
		-6.44231900000000035,36.73810100000000034,789,3622,1
		-6.08933000000000035,36.2724410000000006,2226,577,1
		-6.06687400000000032,36.28812099999999674,2101,522,1
		-6.20306599999999975,36.38529900000000339,1965,1422,1
		-6.14375699999999991,36.42949999999999733,1590,1323,1
		-6.12581799999999976,36.69798999999999722,147,2104,1
		-6.13118300000000005,36.70036400000000043,153,2129,1
		-6.28443299999999994,36.53378599999999921,1419,2242,1
		10.23553199999999919,36.80443900000000212,1954,2952,1

					</code></pre>
					<aside class="notes">
						Para la descarga de los resultados y que sean verificables se ha usado el formato JSON con todos los datos
					</aside>
				</section>



				<section >
					<h3>Resultados Visualización de imágenes</h3>
					<a href="http://darkskyiss.org/" target="_blank"><img src='img/visualimagenes.png'></a>

					<aside class="notes">
						Otro medio de comprobación de resultados es la visualización directa de las imágenes. Enlace externo
					</aside>
				</section>	



				<section data-background="img/postales.png">
					<aside class="notes">
						Existen más de 200 imágenes completamente georreferenciadas
					</aside>
				</section>


				<section >
					<h3>World Atlas of Artificial Sky Brightness</h3>
					<iframe width="1000px"  height="600px" src="http://cires.maps.arcgis.com/apps/Embed/index.html?webmap=91e5965079034c5fa7e7ba8beab38dae&extent=8,26.7634,-8,50&zoom=true&scale=true&disable_scroll=true&theme=light" ></iframe>
					<aside class="notes">
						World Atlas of Artificial Sky Brightness
					</aside>
				</section>


				<section >
					<h3>Resultados - Cáculo de Isofotas</h3>
					<img src='img/isophotas.png'>
					<aside class="notes">
						Resultados adicionales, Modelos Digitales de Elevación a partir de la intensidad de energía radiada
					</aside>
				</section>

				<section >
					<h3>Resultados - Identificación de puntos de emisión</h3>
					<img src='img/elevaciones.png'>
				</section>


				<section >
					<h3>Resultados - Identificación de puntos de emisión</h3>
					<img src='img/ortofotos.png'>
					<aside class="notes">
						Superposición de ortofotografía para identificar las fuentes luminosas
					</aside>
				</section>

				<section >
					<h3>Participación</h3>
					<a href="https://www.crowdai.org/challenges/2" target="_blank"><img src='img/machinelearning.png'></a>
					<aside class="notes">
						
					</aside>
				</section>

				<section data-background="img/fondoPersonas.png">
					<h2 style="color:yellow">Agradecimientos</h2>
					<h3 class="fragment" style="color:yellow">Voluntarios....muchos voluntarios</h3>
					<h3 class="fragment" style="color:yellow">NASA, ESA, MediaLabPrado, CSA-ASC Canada</h3>
					<h3 class="fragment" style="color:yellow">TV, prensa, redes sociales</h3>		
			
				</section>

				<section>
					<h2 style="color:yellow">Esperamos vuestra participación</h2>
					<a href="http://www.citiesatnight.org/index_ES.html" target="_blank" width="350" height="350"><img src='img/qr.png'></a>&nbsp;&nbsp;&nbsp;<img src='img/ahorro.jpg' width="350" height="350">
			
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>


			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
